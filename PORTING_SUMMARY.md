# Porting Summary: simple-albion-api

## Overview

This document summarizes the TypeScript/Node.js port of the Python library `albion-api-client` by Patrick Roelke.

## What Was Created

### Project Structure

```
simple-albion-api/
├── src/
│   ├── AlbionAPI.ts      # Main API client class (ported from Python)
│   ├── types.ts          # TypeScript type definitions
│   └── index.ts          # Package entry point
├── tests/
│   └── AlbionAPI.test.ts # Unit tests
├── examples/
│   ├── guild-members.ts  # Port of test_albion.py
│   └── basic-usage.ts    # Additional usage examples
├── dist/                 # Compiled output (generated by build)
│   ├── cjs/             # CommonJS modules
│   ├── esm/             # ES Modules
│   └── types/           # TypeScript definitions
├── package.json         # npm package configuration
├── tsconfig*.json       # TypeScript configurations (dual package)
├── jest.config.js       # Jest testing configuration
├── README.md            # Comprehensive documentation
├── LICENSE              # MIT License (with attribution)
├── CHANGELOG.md         # Version history
├── CONTRIBUTING.md      # Contribution guidelines
├── .gitignore           # Git ignore rules
└── .npmignore           # npm publish ignore rules
```

## Key Features

### 1. Dual Package Support

The library compiles to both module systems:
- **CommonJS**: `const { AlbionAPI } = require('simple-albion-api')`
- **ES Modules**: `import { AlbionAPI } from 'simple-albion-api'`

This is configured via three TypeScript config files:
- `tsconfig.cjs.json` - CommonJS output
- `tsconfig.esm.json` - ES Module output
- `tsconfig.types.json` - Type definitions

### 2. Full TypeScript Support

All API methods have complete type definitions:
- Input parameters are strongly typed
- Return types are properly defined
- IDE autocomplete and IntelliSense work perfectly
- Type-safe server selection, range types, etc.

### 3. 1:1 API Compatibility

Every method from the Python library has been ported:

| Python Method | TypeScript Method | Status |
|--------------|-------------------|--------|
| `get_player_id()` | `getPlayerId()` | ✅ |
| `get_player_info()` | `getPlayerInfo()` | ✅ |
| `get_player_topkills()` | `getPlayerTopkills()` | ✅ |
| `get_player_solokills()` | `getPlayerSolokills()` | ✅ |
| `get_player_death()` | `getPlayerDeath()` | ✅ |
| `get_guild_id()` | `getGuildId()` | ✅ |
| `get_guild_info()` | `getGuildInfo()` | ✅ |
| `get_guild_data()` | `getGuildData()` | ✅ |
| `get_guild_top_kills()` | `getGuildTopKills()` | ✅ |
| `get_guild_stats()` | `getGuildStats()` | ✅ |
| `get_guild_members()` | `getGuildMembers()` | ✅ |
| `get_guild_fued()` | `getGuildFeud()` | ✅ |
| `get_server_status()` | `getServerStatus()` | ✅ |
| `get_event()` | `getEvent()` | ✅ |
| `get_recent_events()` | `getRecentEvents()` | ✅ |
| `get_events_between()` | `getEventsBetween()` | ✅ |
| `get_guildmatches()` | `getGuildmatches()` | ✅ |
| `get_guildmatches_top()` | `getGuildmatchesTop()` | ✅ |
| `get_guildmatches_next()` | `getGuildmatchesNext()` | ✅ |
| `get_guildmatches_past()` | `getGuildmatchesPast()` | ✅ |
| `get_guildmatches_history()` | `getGuildmatchesHistory()` | ✅ |
| `search()` | `search()` | ✅ |
| `top_player_kill_fame()` | `topPlayerKillFame()` | ✅ |
| `top_guild_kill_fame()` | `topGuildKillFame()` | ✅ |
| `top_kill_fame_ratio()` | `topKillFameRatio()` | ✅ |
| `top_guilds_by_attack()` | `topGuildsByAttack()` | ✅ |
| `top_guilds_by_defense()` | `topGuildsByDefense()` | ✅ |
| `player_weapon_ranking()` | `playerWeaponRanking()` | ✅ |
| `get_battles()` | `getBattles()` | ✅ |
| `get_weapon_categories()` | `getWeaponCategories()` | ✅ |

### 4. Proper Attribution

All files include attribution to the original author:
- README prominently credits Patrick Roelke
- LICENSE includes both copyright notices
- Source code comments reference the original repository
- Documentation links to the original Python library

## Installation & Usage

### For Your Bot

1. **Navigate to the directory**:
   ```bash
   cd simple-albion-api
   ```

2. **Install in your bot project**:
   ```bash
   # If your bot is in a different directory
   cd /path/to/your/bot
   npm install /home/osboxes/guild_api_test/simple-albion-api
   ```

3. **Use in your bot** (JavaScript):
   ```javascript
   const { AlbionAPI } = require('simple-albion-api');

   const client = new AlbionAPI({ server: 'americas' });

   async function getGuildInfo(guildName) {
     const guildId = await client.getGuildId(guildName);
     const members = await client.getGuildMembers(guildId);
     return members;
   }
   ```

4. **Or with TypeScript**:
   ```typescript
   import { AlbionAPI } from 'simple-albion-api';

   const client = new AlbionAPI({ server: 'americas' });
   const members = await client.getGuildMembers(guildId);
   ```

## Publishing to npm

When ready to publish:

1. **Update package.json** with your GitHub repository URL:
   ```json
   "repository": {
     "type": "git",
     "url": "https://github.com/YOUR_USERNAME/simple-albion-api.git"
   }
   ```

2. **Login to npm**:
   ```bash
   npm login
   ```

3. **Publish**:
   ```bash
   npm publish
   ```

The package will automatically build before publishing (via `prepublishOnly` script).

## Testing

All tests pass successfully:

```bash
npm test
```

Output:
```
Test Suites: 1 passed, 1 total
Tests:       16 passed, 16 total
```

## Build Verification

The build creates three output directories:

```bash
npm run build
```

Generates:
- `dist/cjs/` - CommonJS modules for Node.js
- `dist/esm/` - ES modules for modern bundlers
- `dist/types/` - TypeScript type definitions (.d.ts files)

## Migration from Python

If you were using the Python version, here are the key differences:

1. **Naming Convention**:
   - Python: `snake_case` → TypeScript: `camelCase`
   - Example: `get_guild_id()` → `getGuildId()`

2. **Async/Await**:
   - All methods return Promises
   - Use `await` or `.then()` to handle responses

3. **Server Selection**:
   ```python
   # Python
   client = AlbionAPI(server='europe')
   ```
   ```typescript
   // TypeScript
   const client = new AlbionAPI({ server: 'europe' });
   ```

4. **Type Safety**:
   - TypeScript provides compile-time type checking
   - IDEs will show available methods and parameters

## Next Steps

1. **Test with Your Bot**: Install the package in your bot project and test it
2. **Create GitHub Repository**: Initialize git and push to GitHub
3. **Publish to npm**: Share with the community
4. **Star the Original**: Don't forget to star Patrick Roelke's original repository

## Attribution

This library is a port of [albion-api-client](https://github.com/proelke/albion-api-client) by Patrick Roelke.

**Original Author**: Patrick Roelke (proelke@gmail.com)
**Original Repository**: https://github.com/proelke/albion-api-client
**License**: MIT (maintained in this port)

---

**Project completed**: 2026-01-20
**TypeScript Version**: 5.x
**Node.js Version**: 16+
**Package Manager**: npm
